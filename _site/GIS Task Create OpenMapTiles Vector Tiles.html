<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>COZ GIS Wiki</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,500,500i,700,700i|Noto+Sans:400,400i,700,700i|Source+Code+Pro&amp;subset=latin-ext">
  <!-- <link rel="stylesheet" href="/wing.css"/> -->
  <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
  <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
  <!-- <link rel="stylesheet" href="https://unpkg.com/chota@latest"> -->
  <style>
    :root {
      --color-primary: #1a639f;
      --color-lightGrey: #d2d6dd;
      --color-grey: #7e818b;
      --color-darkGrey: #3f4144;
      --color-error: #d43939;
      --color-success: #28bd14;
      --grid-maxWidth: 140rem;
      --grid-gutter: 2rem;
      --font-size: 1.6rem;
      --font-family: "Noto Sans", -apple-system, BlinkMacSystemFont, Avenir, "Avenir Next", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif
    }

    body {
      background: white;
    }

    h1,
    h2,
    h3,
    h4 {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-family: "Montserrat";
      font-weight: 700;
    }
    nav {
      background: white;
    }
    .off-canvas-content, .off-canvas-sidebar {
      padding: 1rem;
      min-height: 100vh;
    }
    .off-canvas-sidebar {
      background: whitesmoke;
    }
    p {
      margin: 0 0 0.8rem;
    }
    .content {
      padding: 1rem 0;
    }
  </style>
</head>

<body>
  <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
  <div class="off-canvas off-canvas-sidebar-show">
    <!-- off-screen toggle button -->
    <a class="off-canvas-toggle btn btn-primary btn-action" href="#sidebar-id">
      <i class="icon icon-menu"></i>
    </a>
  
    <div id="sidebar-id" class="off-canvas-sidebar">
      <div class="container">
          <h4><a href="/">COZ GIS Wiki</a></h4>
          
          
          <p><a href="/GIS%20Task%20ArcGIS%20Online%20Collector%20Setup.html">GIS Task ArcGIS Online Collector Setup </a></p>
          
          
          
          <p><a href="/GIS%20Task%20Create%20OpenMapTiles%20Vector%20Tiles.html">GIS Task Create OpenMapTiles Vector Tiles </a></p>
          
          
          
          <p><a href="/GIS%20Task%20Image%20Manipulation.html">GIS Task Image Manipulation </a></p>
          
          
          
          <p><a href="/GIS%20Task%20Vector%20Tile%20Servers.html">GIS Task Vector Tile Servers </a></p>
          
          
          
          <p><a href="/GIS%20Web%20Server%20and%20Apps%20Resources.html">GIS Web Server and Apps Resources </a></p>
          
          
          
          <p><a href="/Understanding%20ArcGIS%20Enterprise.html">Understanding ArcGIS Enterprise </a></p>
          
          
          
          
      </div>
    </div>
  
    <a class="off-canvas-overlay" href="#close"></a>
  
    <div class="off-canvas-content">
      <div class="container">
        <div class="content">
            <h1>GIS Task Create OpenMapTiles Vector Tiles </h1>

<h3 id="in-ubunutu-1804">In Ubunutu 18.04</h3>

<p><code class="highlighter-rouge">git clone https://github.com/openmaptiles/openmaptiles.git</code></p>

<p><code class="highlighter-rouge">cd openmaptiles</code></p>

<p><code class="highlighter-rouge">./quickstart.sh</code></p>

<ul>
  <li>Delete the albania osm file in the data folder and replace with the latest Ohio data from <a href="http://download.geofabrik.de">http://download.geofabrik.de</a></li>
  <li>Move this file into the data folder</li>
  <li>Create a docker-compose-config.yml file in the same directory as follows:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2"
services:
  generate-vectortiles:
    environment:
      BBOX: "-84.8202, 38.4031, -80.5187, 41.9775"
      OSM_MAX_TIMESTAMP: "2019-04-04"
      OSM_AREA_NAME: "ohio"
      MIN_ZOOM: 0
      MAX_ZOOM: 14
</code></pre></div></div>

<p><code class="highlighter-rouge">./quickstart.sh the name you gave in the OSM_AREA_NAME so ./quickstart.sh ohio</code></p>

<p>Copy the tiles.mbtiles to Windows</p>

<p>Unpack the mbtiles to a folder of vector tiles with <a href="https://github.com/phiphou/mbtiles2ungzpbf">https://github.com/phiphou/mbtiles2ungzpbf</a></p>

<hr />
<h3 id="tried-on-windows-and-failed">Tried on windows and failed</h3>

<p><code class="highlighter-rouge">docker-compose up -d postgres</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose run import-water
docker-compose run import-natural-earth
docker-compose run import-lakelines
docker-compose run import-osmborder
</code></pre></div></div>

<h4 id="install-openmaptiles-tools">Install OpenMapTiles-Tools</h4>
<p><code class="highlighter-rouge">
docker run -v data/ohio-latest.osm.pbf openmaptiles/openmaptiles-tools
</code></p>

<p><code class="highlighter-rouge">docker-compose run --rm openmaptiles-tools generate-tm2source openmaptiles.yaml --host="postgres" --port=5432 --database="openmaptiles" --user="openmaptiles" --password="openmaptiles" &gt; build/openmaptiles.tm2source/data.yml</code></p>

<p><code class="highlighter-rouge">
docker-compose run --rm openmaptiles-tools generate-imposm3 openmaptiles.yaml &gt; build/mapping.yaml
</code></p>

<p><strong>These two files mapping.yaml and data.yaml need converted to UTF8 which can be done in Notepad or Notepad++</strong></p>

<p><code class="highlighter-rouge">docker-compose run --rm openmaptiles-tools generate-sql openmaptiles.yaml &gt; build/tileset.sql</code></p>

<h4 id="import-the-ohio-latestosmpbf">Import the ohio-latest.osm.pbf</h4>

<p><code class="highlighter-rouge">docker-compose run import-osm</code></p>

<p>This should show that it is importing from the ohio file, and not the default albania file.</p>

<h4 id="generate-the-mbtiles-vector-tiles">Generate the mbtiles vector tiles</h4>

<p><code class="highlighter-rouge">docker-compose run generate-vectortiles</code> - <strong>ERROR - z(numeric) does not exist - Just run on an Ubuntu droplet</strong></p>


        </div>
      </div>
    </div>
  </div>

  <script src="" async defer></script>
</body>

</html>